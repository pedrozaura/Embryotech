<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Embryotech{% endblock %}</title>
    <link
      rel="icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
      type="image/png"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    {% block content %}{% endblock %}

    <!-- Mensagem de erro global -->
    <div
      id="errorMessage"
      class="error-message"
      style="
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10000;
      "
    ></div>

    {% block scripts %}
    <script>
      // Configuração global
      const API_BASE_URL = "{{ request.url_root.rstrip('/') }}";

      // Função global para mostrar mensagens
      function showMessage(message, type = "error", isLoginError = false) {
        const errorMessage = document.getElementById("errorMessage");
        if (!errorMessage) return;

        errorMessage.textContent = message;
        errorMessage.style.display = "block";

        errorMessage.className = "";

        if (type === "error") {
          errorMessage.classList.add("error-message");
          if (isLoginError) {
            errorMessage.classList.add("login-error");
          }
        } else {
          errorMessage.classList.add("success-message");
        }

        setTimeout(() => {
          errorMessage.style.display = "none";
        }, 5000);
      }

      function showError(message, isLoginError = false) {
        showMessage(message, "error", isLoginError);
      }
    </script>
    {% endblock %}
  </body>
</html>
